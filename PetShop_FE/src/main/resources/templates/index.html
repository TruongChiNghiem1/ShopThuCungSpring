<!-- meta tags and other links -->
<!-- Header -->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Title -->
	<title>Document</title>
	<!-- Favicon -->
	<link rel="shortcut icon" th:href="@{/assets/images/logo/favicon.png}">
	<!-- Bootstrap -->
	<link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}">
	<!-- Fontawesome -->
	<link rel="stylesheet" th:href="@{/assets/css/fontawesome-all.min.css}">
	<!-- Slick -->
	<link rel="stylesheet" th:href="@{/assets/css/slick.css}">
	<!-- Line Awesome -->
	<link rel="stylesheet" th:href="@{/assets/css/line-awesome.min.css}">
	<!-- Countdown CSS -->
	<link rel="stylesheet" th:href="@{/assets/css/jquery.classycountdown.min.css}">
	<!-- Range CSS -->
	<link rel="stylesheet" th:href="@{/assets/css/jquery-ui.css}">
	<!-- Magnific CSS -->
	<link rel="stylesheet" th:href="@{/assets/css/magnific-popup.css}">
	<!-- Main CSS -->
	<link rel="stylesheet" th:href="@{/assets/css/main.css}">
</head>

<body>

	<!--==================== Preloader Start ====================-->
	<div class="preloader">
		<div class="loader-p"></div>
	</div>
	<!--==================== Preloader End ====================-->

	<!--==================== Overlay Start ====================-->
	<div class="body-overlay"></div>
	<!--==================== Overlay End ====================-->

	<!--==================== Sidebar Overlay End ====================-->
	<div class="sidebar-overlay"></div>
	<!--==================== Sidebar Overlay End ====================-->

	<!-- ==================== Scroll to Top End Here ==================== -->
	<a class="scroll-top"><i class="fas fa-angle-double-up"></i></a>
	<!-- ==================== Scroll to Top End Here ==================== -->
	<!-- ==================== Bottom Header End Here ==================== -->
	<header class="header" id="header">
		<div class="container">
			<nav class="navbar navbar-expand-lg navbar-light">
				<button class="navbar-toggler header-button" type="button" data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
					aria-expanded="false" aria-label="Toggle navigation">
					<span id="hiddenNav"><i class="las la-bars"></i></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav nav-menu me-auto">
						<li class="nav-item dropdown">
							<a class="nav-link" href="/" role="button"> Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" aria-current="page" href="/about">About</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link" href="/products" role="button"> Products</a>
						</li>
						<li class=" nav-item">
							<div class="toggle-search-box d-none d-lg-block">
								<button type="button" class="" data-bs-toggle="modal" data-bs-target="#search-box"
									data-bs-whatever="@mdo"><i class="las la-search"></i></button>
							</div>
						</li>
					</ul>
				</div>
				<div class="header-info">
					<div class="toggle-search-box d-lg-none d-block">
						<button type="button" class="" data-bs-toggle="modal" data-bs-target="#search-box"
							data-bs-whatever="@mdo"><i class="las la-search"></i></button>
					</div>
					<div class="header-info__wishlist">
						<a href="wishlist.html" class="header-info__link"><i class="far fa-heart"></i></a>
					</div>
					<div class="header-info__cart">
						<a href="/cart" class="header-info__link"><i class="fas fa-shopping-cart"></i></a>
						<span class="header-info__cart-quantity">03</span>
					</div>
					<div class="header-info__user">
						<!-- Hiển thị khi người dùng đã đăng nhập -->
						<a href="/account" class="header-info__link" th:if="${loggedIn}"><i class="far fa-user"></i></a>

						<!-- Hiển thị khi người dùng chưa đăng nhập -->
						<a href="/loginPage" class="header-info__link" th:unless="${loggedIn}"><i
								class="far fa-user"></i></a>
					</div>
				</div>
				<div class="header-categories d-block d-lg-none">
					<button class="header-category">
						Categories <span class="header-category__icon"><i class="las la-bars"></i></span>
					</button>
				</div>
			</nav>
		</div>
	</header>
	<!-- ==================== Bottom Header End Here ==================== -->

	<!--========================== Search Modal Start ==========================-->
	<div class="overlay-search-box position-relative">
		<div class="modal fade" id="search-box" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog modal-fullscreen modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="search-overlay-close" data-bs-dismiss="modal" aria-label="Close"><i
								class="las la-times"></i></button>
					</div>
					<div class="modal-body">
						<form>
							<div class="row">
								<div class="col-lg-12">
									<div class="search-box">
										<div class="input--group">
											<input type="text" class="form--control style-two" placeholder="Search....">
											<button class="search-btn" type="submit"><i
													class="las la-search"></i></button>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--========================== Search Modal End ==========================-->


	<!--========================== Banner Section Start ==========================-->
	<section class="banner-section pt-60 pb-60">
		<div class="container">
			<div class="row gy-4 justify-content-center">
				<div class="col-lg-3">
					<nav class="category">
						<span class="close-sidebar d-lg-none d-block"><i class="las la-times"></i></span>
						<ul class="category-menu category-menu-show">


						</ul>
						<div class="contact-list__wrapper d-md-none d-block">
							<div class="contact-list">
								<div class="contact-list__item">
									<span class="contact-list__icon">
										<img src="assets/images/icons/phone.png" alt="">
									</span>
								</div>
								<div class="contact-list__number-link">
									<span class="contact-list__info"> 000 - 8888 - 9999</span>
								</div>
							</div>
							<div class="contact-list">
								<div class="contact-list__item">
									<span class="contact-list__icon">
										<img src="assets/images/icons/email.png" alt="">
									</span>
								</div>
								<div class="contact-list__number-link">
									<span class="contact-list__info"> <a
											href="https://template.viserlab.com/cdn-cgi/l/email-protection"
											class="__cf_email__"
											data-cfemail="46302f35233436233206212b272f2a6825292b">[email&#160;protected]</a></span>
								</div>
							</div>
						</div>
					</nav>
				</div>

				<div class="col-lg-9 col-md-12">
					<div class="banner">
						<div class="banner-content">
							<h4 class="banner-content__subtitle">Best Product</h4>
							<h2 class="banner-content__title">DOG FOOD</h2>
							<p class="banner-content__desc">
								Wusmod tempor incididu nt ut labore et dolore magna aliqua.
							</p>
							<div class="banner-content__buttons">
								<a href="/products" class="btn btn--base pill">SHOP NOW</a>
								<div class="button-shape">
									<img src="assets/images/shapes/button-shape.png" alt="">
								</div>
							</div>
						</div>
						<div class="banner-thumb">
							<img src="assets/images/thumbs/banner-img.png" alt="">
							<div class="banner-thumb__shape">
								<img src="assets/images/shapes/banner-shape.png" alt="">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!--========================== Banner Section End ==========================-->

	<!--==============================offer-section start  here=============================-->
	<div class="offer-section pt-60 pb-60">
		<div class="container">
			<div class="row gy-4">
				<div class="col-lg-6">
					<a href="/products" class="offer">
						<img src="assets/images/thumbs/offer-img.png" alt="">
					</a>
				</div>
				<div class="col-lg-6">
					<a href="/products" class="offer">
						<img src="assets/images/thumbs/offer-img03.png" alt="">
					</a>
				</div>
			</div>
		</div>
	</div>
	<!--======================product sections start here =================-->
	<div class="product-section py-60">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="section-heading">
						<h4 class="section-heading__subtitle">Special products</h4>
						<h3 class="section-heading__title style-two">Trending Products<span
								class="section-heading__bars"></span></h3>
					</div>
				</div>
			</div>
			<div class="row justify-content-center gy-4" id="trending-product">

			</div>
		</div>
	</div>
	<!-- ====================deal section start here ====================-->
	<div class="best-deals-section">
		<div class="container-fluid p-0">
			<div class="row gx-0 justify-content-center flex-wrap-reverse">
				<div class="col-xl-4">
					<div class="deal-thumb">
						<img src="assets/images/thumbs/deal-img.png" alt="">
					</div>
				</div>
				<div class="col-xl-8">
					<div class="deal-counter py-120"
						style="background-image: url(assets/images/thumbs/deal-product-img.png);">
						<div class="section-heading style-three">
							<h4 class="section-heading__subtitle">Best products</h4>
							<h3 class="section-heading__title">Best Deals Of T he Week!</h3>
						</div>
						<div id="countdown-container"></div>
						<div class="deal-counter__footer text-center">
							<p class="deal-counter__title mb-3">Dummy Product Name</p>
							<h6 class="deal-counter__price">
								<span class="deal-counter__price-new">$620</span> $520
							</h6>
						</div>
						<div class="text-center">
							<a href="/products" class="btn btn--base pill">SHOP NOW</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!--============================feature section start here =======================-->
	<div class="feature-section bg-img py-60"
		style="background-image: url(assets/images/thumbs/feature/feature-img.png);">
		<div class="container">
			<div class="row gy-4">
				<div class="col-md-3 col-sm-6 col-xxsm-6">
					<div class="feature-item">
						<div class="feature-item__thumb">
							<img src="assets/images/thumbs/feature/f04.png" alt="">
						</div>
						<div class="feature-item__info">
							<h5 class="feature-item__title">
								FREE SHIPPING
							</h5>
							<span class="feature-item__payment"> For All Order Over $99 </span>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 col-xxsm-6">
					<div class="feature-item">
						<div class="feature-item__thumb">
							<img src="assets/images/thumbs/feature/f03.png" alt="">
						</div>
						<div class="feature-item__info">
							<h5 class="feature-item__title">
								FRIENDLY SUPPORT
							</h5>
							<span class="feature-item__payment"> 24/7 Customer Support </span>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 col-xxsm-6">
					<div class="feature-item">
						<div class="feature-item__thumb">
							<img src="assets/images/thumbs/feature/f02.png" alt="">
						</div>
						<div class="feature-item__info">
							<h5 class="feature-item__title">
								SECURE PAYMENT
							</h5>
							<span class="feature-item__payment">100% Secure Payment</span>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 col-xxsm-6">
					<div class="feature-item">
						<div class="feature-item__thumb">
							<img src="assets/images/thumbs/feature/f01.png" alt="">
						</div>
						<div class="feature-item__info">
							<h5 class="feature-item__title">
								SHIPPING & RETURN
							</h5>
							<span class="feature-item__payment"> within 30days For Refund </span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- ==========================feature setion end here ============================-->



	<!-- ========footer===== -->

	<!-- ==================== Footer Start Here ==================== -->
	<footer class="footer-area section-bg-light bg-img">
		<div class="pb-60 pt-120">
			<div class="container">
				<div class="row justify-content-center gy-5">
					<div class="col-xl-3 col-sm-6">
						<div class="footer-item">
							<div class="footer-item__logo">
								<a href="index.html"> <img src="assets/images/logo/footer-logo02.png" alt=""></a>
							</div>
							<p class="footer-item__desc"> Maecenas tempus tellus eget cdimentum rhoncus sem quam semper
							</p>
							<ul class="social-list">
								<li class="social-list__item"><a href="https://www.facebook.com/"
										class="social-list__link"><i class="fab fa-facebook-f"></i></a> </li>
								<li class="social-list__item"><a href="https://www.twitter.com/"
										class="social-list__link"> <i class="fab fa-twitter"></i></a></li>
								<li class="social-list__item"><a href="https://www.linkedin.com/"
										class="social-list__link"> <i class="fab fa-linkedin-in"></i></a></li>
								<li class="social-list__item"><a href="https://www.pinterest.com/"
										class="social-list__link"> <i class="fab fa-pinterest-p"></i></a></li>
							</ul>
						</div>
					</div>
					<div class="col-xl-1 d-xl-block d-none"></div>
					<div class="col-xl-2 col-sm-6">
						<div class="footer-item">
							<h5 class="footer-item__title"> Pages </h5>
							<ul class="footer-menu">
								<li class="footer-menu__item"><a href="/about" class="footer-menu__link"> About Us</a>
								</li>
								<li class="footer-menu__item"><a href="faq.html" class="footer-menu__link"> Faq</a></li>
								<li class="footer-menu__item"><a href="/cart" class="footer-menu__link">Shopping Cart
									</a></li>
								<li class="footer-menu__item"><a href="blog.html" class="footer-menu__link"> Blog</a>
								</li>
								<li class="footer-menu__item"><a href="product-two-details.html"
										class="footer-menu__link"> Product Details</a></li>
							</ul>
						</div>
					</div>
					<div class="col-xl-2 col-sm-6">
						<div class="footer-item">
							<h5 class="footer-item__title"> Useful link </h5>
							<ul class="footer-menu">
								<li class="footer-menu__item"><a href="/products" class="footer-menu__link"> Product
										Category </a></li>
								<li class="footer-menu__item"><a href="check-out.html"
										class="footer-menu__link">Checkout </a></li>
								<li class="footer-menu__item"><a href="login.html" class="footer-menu__link">Login </a>
								</li>
								<li class="footer-menu__item"><a href="registration.html" class="footer-menu__link">
										Registration </a></li>
								<li class="footer-menu__item"><a href="contact.html" class="footer-menu__link"> Contact
										Us </a></li>
							</ul>
						</div>
					</div>
					<div class="col-xl-1 d-xl-block d-none"></div>
					<div class="col-xl-3 col-sm-6">
						<div class="footer-item">
							<h5 class="footer-item__title">Subscribe now</h5>
							<div class="subscriber-form mb-3">
								<input type="text" class=" form--control style-two" placeholder="Email Address"
									aria-label="Recipient's username">
								<button class="btn btn--base subscribe-button"><i
										class="fas fa-paper-plane"></i></button>
							</div>
							<p>Subscribe to our newsletter and get 10% off your first purchase..</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Footer Top End-->

		<!-- bottom Footer -->
	</footer>
	<!-- ==================== Footer End Here ==================== -->

	<!-- Jquery js -->

	<script src="assets/js/jquery-3.6.1.min.js"></script>
	<!-- Popper js -->
	<script src="assets/js/popper.min.js"></script>
	<!-- Bootstrap Js -->
	<script src="assets/js/bootstrap.min.js"></script>
	<!-- Slick js -->
	<script src="assets/js/slick.min.js"></script>
	<!-- mixitup js -->
	<script src="assets/js/mixitup.min.js"></script>
	<!-- countdown js -->
	<script src="assets/js/jquery.knob.js"></script>
	<script src="assets/js/jquery.throttle.js"></script>
	<script src="assets/js/jquery.classycountdown.min.js"></script>
	<!-- range js -->
	<script src="assets/js/jquery-ui.js"></script>
	<!-- magnific popup js -->
	<script src="assets/js/jquery.magnific-popup.min.js"></script>
	<!-- main js -->
	<script src="assets/js/main.js"></script>

	<script>
		const apiUrlBackend = 'http://localhost:9998/api';
		const categoryApiUrl = 'http://localhost:9998/api/categories';
		const productsApiUrl = 'http://localhost:9998/api/products'

		$(document).ready(function () {
			fetchCategories();
			fetchProducts()
		});

		// Lấy danh sách danh mục từ API
		function fetchCategories() {
			$.get(categoryApiUrl)
				.done(function (categories) {
					const categorySelect = $('.category-menu-show');
					categories.forEach(category => {
						const option = $(`<li class="category-menu__item">
												<a href="/products/${category.id}" class="category-menu__link"><span class="category-menu__thumb">
													<img src="assets/images/icons/cat.png" alt=""></span> ${category.name} </a>
											</li>`);
						categorySelect.append(option);
					});
				})
				.fail(function (error) {
					console.error('Lỗi:', error);
				});
		}

		function fetchProducts() {
			$.get(productsApiUrl)
				.done(function (products) {
					const productSelect = $('#trending-product');
					products.forEach(product => {
						const option = $(
							`									<div class="col-lg-3 col-md-4 col-sm-6 col-xsm-6">
														<div class="product-item text-center">
															<div class="product-item__thumb">
																<a href="/products/${product.id}" class="product-item__thumb-link">
																	<img src="${apiUrlBackend}/assets/upload${product.images[0]}" alt="">
																</a>
																<button class="product-item__icon">
																	<span class="product-item__icon-style">
																		<i class="las la-heart"></i>
																	</span>
																</button>
																<div class="product-item__badge">
																	<span class="badge badge--base">Sale</span>
																</div>
															</div>
															<div class="product-item__content">
																<h5 class="product-item__title">
																	<a href="/products/${product.id}" class="product-item__title-link">
																		   ${product.name}
																	</a>
																</h5>
																<ul class="product-info__rating justify-content-center align-items-center">
																	<li class="product-info__rating-item">
																		<i class="fas fa-star"></i>
																	</li>
																	<li class="product-info__rating-item">
																		<i class="fas fa-star"></i>
																	</li>
																	<li class="product-info__rating-item">
																		<i class="fas fa-star"></i>
																	</li>
																	<li class="product-info__rating-item">
																		<i class="fas fa-star"></i>
																	</li>
																	<li class="product-info__rating-item">
																		<i class="fas fa-star-half-alt"></i>
																	</li>
																	<li class="product-info__number">
																		4.8
																	</li>
																</ul>
																<h6 class="product-item__price">
													                  <span class="product-item__price-new">$${product.oldPrice}</span> $${product.newPrice}
										                        </h6>
																<button class="btn btn--base pill btn--sm" onclick="addToCart('${product.id}', '${product.name}', ${product.newPrice}, '${product.images[0]}')">Add to Cart</button>
															</div>
														</div>
													</div>`
						);
						productSelect.append(option);
					});
				})
				.fail(function (error) {
					console.error('Lỗi:', error);
				});
		}
		// Hàm thêm sản phẩm vào giỏ hàng
		function addToCart(productId, productName, productPrice, images) {
			// Lấy giỏ hàng hiện tại từ localStorage
			let cart = JSON.parse(localStorage.getItem('cart')) || [];

			// Tạo sản phẩm mới
			const product = {
				id: productId,
				name: productName,
				price: productPrice,
				images: images,
				quantity: 1
			};

			// Kiểm tra xem sản phẩm đã có trong giỏ hàng chưa
			const existingProductIndex = cart.findIndex(item => item.id === productId);
			if (existingProductIndex > -1) {
				// Nếu có, tăng số lượng
				cart[existingProductIndex].quantity += 1;
			} else {
				// Nếu không, thêm sản phẩm mới vào giỏ hàng
				cart.push(product);
			}

			// Lưu giỏ hàng vào localStorage
			localStorage.setItem('cart', JSON.stringify(cart));

			// Thông báo cho người dùng
			alert(`${productName} đã được thêm vào giỏ hàng!`);
		}
	</script>
</body>

</html>